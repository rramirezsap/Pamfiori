sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/BusyDialog","sap/m/MessageToast","sap/m/Text"],function(e,t,s,o,n){"use strict";return e.extend("invoice.analyzer.controller.App",{onInit:function(){const e=new t({results:[]});this.getView().setModel(e,"resultsModel")},onUpload:function(){const e=this.getView();const t=new s({title:"Processing",text:"Processing file, please wait..."});t.open();setTimeout(function(){const s=[{invoiceId:"INV02288-1235996",status:"Approved",serviceNowCase:"CS12553456",error:"tax error",aiInsight:"Possible tax mismatch",suggestedAction:"Review tax mapping"},{invoiceId:"INV02288-1235998",status:"Reconciled",serviceNowCase:"CS12553498",error:"no errors",aiInsight:"No issues detected",suggestedAction:"No action required"}];const o=e.getModel("resultsModel");o.setProperty("/results",s);t.close()},5e3)},onNavigateToDashboard:function(){const e=sap.ui.core.UIComponent.getRouterFor(this);e.navTo("Dashboard")},onAskAI:function(){const e=this.getView();const t=e.byId("aiInput").getValue();const s=e.byId("chatContainer");if(!t){o.show("Please enter a question.");return}s.addItem(new n({text:"üë§ "+t,class:"userMessage"}));fetch("https://invoice-ai-agent.cfapps.us10-001.hana.ondemand.com/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:t})}).then(e=>{if(!e.ok){throw new Error("Server response error")}return e.json()}).then(e=>{s.addItem(new n({text:"ü§ñ "+e.answer,class:"aiMessage"}))}).catch(e=>{s.addItem(new n({text:"‚ö†Ô∏è Error: "+e.message,class:"errorMessage"}))});e.byId("aiInput").setValue("")}})});
//# sourceMappingURL=App.controller.js.map